#
# 10dhcp-reservations 
#

{
    use esmith::HostsDB;
    my $hdb = esmith::HostsDB->open_ro() || return '# hosts DB is not available';

    foreach $host ($hdb->get_all_by_prop('type', 'local')) {
        my $IpAddress = $host->prop('IpAddress') || '';
        my $MacAddress = $host->prop('MacAddress') || '';

	if ($IpAddress eq '' || $MacAddress eq '') {
	    # skip all entries without an IP
	    next;
	}
        
	my $Description = $host->prop('Description') || "";
        $OUT .= "# ${Description}\n" if($Description);

        $OUT .= sprintf "%-18s,%s\n\n", $MacAddress, $IpAddress;
    }

    return $OUT;
}


